databaseChangeLog:
  - changeSet:
      id: 0001-create-schema-stats
      author: balzasporify
      changes:
        - sql:
            dbms: postgresql
            splitStatements: false
            sql: |
              CREATE SCHEMA IF NOT EXISTS stats;


  - changeSet:
      id: 0002-create-table-task-updates
      author: balzasporify
      preConditions:
        - onFail: MARK_RAN
        - not:
          - tableExists:
              schemaName: stats
              tableName: task_updates
      changes:
        - createTable:
            schemaName: stats
            tableName: task_updates
            columns:
              - column:
                  name: task_id
                  type: BIGINT
                  constraints:
                    primaryKey: true
                    nullable: false
              - column:
                  name: last_updated
                  type: TIMESTAMP WITH TIME ZONE
                  constraints:
                    nullable: false
  - changeSet:
      id: 0003-create-table-total-tasks
      author: balzasporify
      preConditions:
        - onFail: MARK_RAN
        - not:
            - tableExists:
                schemaName: stats
                tableName: total_tasks
      changes:
        - createTable:
            schemaName: stats
            tableName: total_tasks
            columns:
              - column:
                  name: total
                  type: BIGINT
                  constraints:
                    nullable: false